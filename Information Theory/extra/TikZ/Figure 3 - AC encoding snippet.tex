\documentclass{subfiles}
\begin{document}
    \begin{figure}[!h]
        \centering
        \begin{subfigure}{0.75\textwidth}
            \begin{lstlisting}
                double AC_encode(char* S, double* cumFun, double* Prob){
                    double high = 1;
                    double low = 0;
                    int i = 1;
                    double range;
                    while (i <= n)  {
                        range = high - low;
                        low = low + range * cumFun[S[i]];
                        high = low + range * (cumFun[S[i]] + Prob[S[i]]);
                    }
                    return high - low;
                }
            \end{lstlisting}
        \end{subfigure}
        \caption{C implementation of the \gls{ac} encoding.}
        \label{Fig:4}
    \end{figure}
\end{document}
