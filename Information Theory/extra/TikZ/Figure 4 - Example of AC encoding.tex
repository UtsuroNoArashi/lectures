\documentclass{subfiles}
\begin{document}
    \begin{figure}[!hb]
        \centering
        \begin{tikzpicture}
            [
                every node/.style={font=\small\ttfamily}
            ]
            \foreach \iteration/\symb in {1/a, 2/b, 3/a, 4/c} {
                \draw [ |- ] (2.25*\iteration, 0) -- (2.25*\iteration, 1.5);
                \draw [ |-| ] (2.25*\iteration, 1.5) -- (2.25*\iteration, 2.25);
                \draw [ -| ] (2.25*\iteration, 2.25) -- (2.25*\iteration, 3);

                \node at (2.25*\iteration + 0.125, 0.75) [label=left:a] {};
                \node at (2.25*\iteration + 0.125, 1.875) [label=left:b] {};
                \node at (2.25*\iteration + 0.125, 2.625) [label=left:c] {};

                \node at (2.25*\iteration, 3) [label=above:{Encoding \symb}, align=center] {};
            }

            % Encode a 
            \node (00) at (2.25, 0) [label=right:{0}] {};
            \node (01) at (2.25, 1.5) [label=right:{$\frac{1}{2}$}] {};
            \node (02) at (2.25, 2.25) [label=right:{$\frac{3}{4}$}] {};
            \node (03) at (2.25, 3) [label=right:{1}] {};
            
            \draw [thick, dashed, rpIris] (00.east) ++ (0.375, 0) -- (4.25, 0);
            \draw [thick, dashed, rpIris] (01.east) ++ (0.375, 0) -- (3.375, 1.5)
                -- (3.375, 3) -- (4.375, 3);

            % Encode b 
            \node (10) at (4.5, 0) [label=right:{0}] {};
            \node (11) at (4.5, 1.5) [label=right:{$\frac{1}{4}$}] {};
            \node (12) at (4.5, 2.25) [label=right:{$\frac{3}{8}$}] {};
            \node (13) at (4.5, 3) [label=right:{$\frac{1}{2}$}] {};
            
            \draw [thick, dashed, rpFoam] (11.east) ++ (0.375, 0) -- (5.625, 1.5) 
                -- (5.625, 0) -- (6.625, 0);
            \draw [thick, dashed, rpFoam] (12.east) ++ (0.375, 0) -- (5.625, 2.25) 
                -- (5.625, 3) -- (6.625, 3);

            % Encode a 
            \node (20) at (6.75, 0) [label=right:{$\frac{1}{4}$}] {};
            \node (21) at (6.75, 1.5) [label=right:{$\frac{5}{16}$}] {};
            \node (22) at (6.75, 2.25) [label=right:{$\frac{11}{32}$}] {};
            \node (23) at (6.75, 3) [label=right:{$\frac{3}{8}$}] {};

            \draw [thick, dashed, rpPine] (20.east) ++ (0.375, 0) -- (9, 0);
            \draw [thick, dashed, rpPine] (21.east) ++ (0.5, 0) -- (7.875, 1.5) 
                -- (7.875, 3) -- (8.875, 3);

            % Encode c 
            \node (30) at (9, 0) [label=right:{$\frac{1}{4}$}] {};
            \node (31) at (9, 1.5) [label=right:{$\frac{9}{32}$}] {};
            \node (32) at (9, 2.25) [label=right:{$\frac{19}{64}$}] {};
            \node (33) at (9, 3) [label=right:{$\frac{5}{16}$}] {};

            \draw [ |-|, thick, dashed, rpGold] (32.east) ++(0.625, 0) -- ++(0, 0.75) ;
            \node at ($(32.east) +(0.625, 0.375)$) [label=right:{$x \in [\frac{19}{64}, \frac{5}{16}]$ }] {};
        \end{tikzpicture}
        \caption{Step by step encoding of \(\omega = abac\) via the AC.}
        \label{Fig:4}
    \end{figure}
\end{document}
